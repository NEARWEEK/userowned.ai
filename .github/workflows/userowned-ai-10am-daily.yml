# UserOwned.ai Daily 10:00 CET Posting
name: UserOwned.ai Daily 10AM CET
on:
  schedule:
    - cron: '0 9 * * *'  # Daily at 10:00 CET (9:00 UTC)
  workflow_dispatch:

jobs:
  daily-10am-posting:
    runs-on: ubuntu-latest
    steps:
    - name: Generate Daily Intelligence Content
      run: |
        echo "ğŸ¤– Generating UserOwned.ai daily intelligence content..."
        
        # Get current date in CET
        REPORT_DATE=$(TZ='Europe/Berlin' date '+%Y-%m-%d')
        REPORT_TIME=$(TZ='Europe/Berlin' date '+%H:%M CET')
        
        # Mock ecosystem scores (you can enhance this with real API calls)
        NEAR_SCORE=85
        ICP_SCORE=72
        TAO_SCORE=68
        DEFI_TVL=157
        
        # Create optimized X content for @userownedai
        X_CONTENT="ğŸ¤– UserOwned.ai Daily Intelligence $REPORT_DATE

ğŸ† AI x Crypto Rankings:
1. NEAR: $NEAR_SCORE/100 â­
2. ICP: $ICP_SCORE/100 ğŸ”¬  
3. TAO: $TAO_SCORE/100 ğŸ§ 

ğŸ“Š \$${DEFI_TVL}B DeFi market
ğŸ” Multi-source analysis
ğŸ“ˆ userowned.ai

#UserOwnedAI #NEAR #ICP #Bittensor #AI #DeFi"
        
        echo "X_CONTENT<<EOF" >> $GITHUB_ENV
        echo "$X_CONTENT" >> $GITHUB_ENV
        echo "EOF" >> $GITHUB_ENV
        
        echo "âœ… Content generated for $REPORT_DATE at $REPORT_TIME"

    - name: Post to X via Buffer/Zapier
      if: ${{ secrets.ZAPIER_WEBHOOK_URL }}
      run: |
        echo "ğŸ¦ Posting to @userownedai via Buffer & Zapier..."
        
        # Send to Zapier webhook for Buffer posting to @userownedai
        curl -X POST "${{ secrets.ZAPIER_WEBHOOK_URL }}" \
          -H "Content-Type: application/json" \
          -d "{
            \"text\": \"$X_CONTENT\",
            \"source\": \"userowned-ai-daily-10am\",
            \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
            \"scheduled_time\": \"$(TZ='Europe/Berlin' date '+%H:%M CET')\",
            \"account\": \"userownedai\"
          }"
        
        echo "âœ… Posted to @userownedai via Buffer & Zapier"

    - name: Post to Telegram
      if: ${{ secrets.TELEGRAM_BOT_TOKEN && secrets.TELEGRAM_CHAT_ID }}
      run: |
        echo "ğŸ“± Posting to Telegram..."
        
        # Create Telegram version
        TELEGRAM_CONTENT="ğŸ¤– User-Owned AI Daily Update

ğŸ† AI Ecosystem Scores:
1. NEAR: 85/100 â­
2. ICP: 72/100 ğŸ”¬ 
3. TAO: 68/100 ğŸ§ 

ğŸ’° Market: \$157B DeFi Total
ğŸ“ˆ Full analysis: userowned.ai
ğŸ”— @userownedai | @NEARWEEK"
        
        # Send to Telegram
        curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
          -H "Content-Type: application/json" \
          -d "{
            \"chat_id\": \"${{ secrets.TELEGRAM_CHAT_ID }}\",
            \"text\": \"$TELEGRAM_CONTENT\",
            \"parse_mode\": \"HTML\"
          }"
        
        echo "âœ… Posted to Telegram"

    - name: Display Results
      run: |
        echo "ğŸ¯ UserOwned.ai Daily Posting Complete!"
        echo ""
        echo "â° Posted at: $(TZ='Europe/Berlin' date '+%H:%M CET')"
        echo "ğŸ¦ X Account: @userownedai"
        echo "ğŸ“± Telegram: Posted"
        echo "ğŸš€ Next run: Tomorrow 10:00 CET"
        echo ""
        echo "Content posted:"
        echo "=============="
        echo "$X_CONTENT"
        echo "=============="
