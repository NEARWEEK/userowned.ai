# UserOwned.ai Daily 10:00 CET Posting
name: UserOwned.ai Daily 10AM CET
on:
  schedule:
    - cron: '0 9 * * *'  # Daily at 10:00 CET (9:00 UTC)
  workflow_dispatch:

jobs:
  daily-10am-posting:
    runs-on: ubuntu-latest
    steps:
    - name: Generate Daily Intelligence Content
      run: |
        echo "🤖 Generating UserOwned.ai daily intelligence content..."
        
        # Get current date in CET
        REPORT_DATE=$(TZ='Europe/Berlin' date '+%Y-%m-%d')
        REPORT_TIME=$(TZ='Europe/Berlin' date '+%H:%M CET')
        
        # Mock ecosystem scores (you can enhance this with real API calls)
        NEAR_SCORE=85
        ICP_SCORE=72
        TAO_SCORE=68
        DEFI_TVL=157
        
        # Create optimized X content for @userownedai
        X_CONTENT="🤖 UserOwned.ai Daily Intelligence $REPORT_DATE

🏆 AI x Crypto Rankings:
1. NEAR: $NEAR_SCORE/100 ⭐
2. ICP: $ICP_SCORE/100 🔬  
3. TAO: $TAO_SCORE/100 🧠

📊 \$${DEFI_TVL}B DeFi market
🔍 Multi-source analysis
📈 userowned.ai

#UserOwnedAI #NEAR #ICP #Bittensor #AI #DeFi"
        
        echo "X_CONTENT<<EOF" >> $GITHUB_ENV
        echo "$X_CONTENT" >> $GITHUB_ENV
        echo "EOF" >> $GITHUB_ENV
        
        echo "✅ Content generated for $REPORT_DATE at $REPORT_TIME"

    - name: Post to X via Buffer/Zapier
      if: ${{ secrets.ZAPIER_WEBHOOK_URL }}
      run: |
        echo "🐦 Posting to @userownedai via Buffer & Zapier..."
        
        # Send to Zapier webhook for Buffer posting to @userownedai
        curl -X POST "${{ secrets.ZAPIER_WEBHOOK_URL }}" \
          -H "Content-Type: application/json" \
          -d "{
            \"text\": \"$X_CONTENT\",
            \"source\": \"userowned-ai-daily-10am\",
            \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",
            \"scheduled_time\": \"$(TZ='Europe/Berlin' date '+%H:%M CET')\",
            \"account\": \"userownedai\"
          }"
        
        echo "✅ Posted to @userownedai via Buffer & Zapier"

    - name: Post to Telegram
      if: ${{ secrets.TELEGRAM_BOT_TOKEN && secrets.TELEGRAM_CHAT_ID }}
      run: |
        echo "📱 Posting to Telegram..."
        
        # Create Telegram version
        TELEGRAM_CONTENT="🤖 User-Owned AI Daily Update

🏆 AI Ecosystem Scores:
1. NEAR: 85/100 ⭐
2. ICP: 72/100 🔬 
3. TAO: 68/100 🧠

💰 Market: \$157B DeFi Total
📈 Full analysis: userowned.ai
🔗 @userownedai | @NEARWEEK"
        
        # Send to Telegram
        curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
          -H "Content-Type: application/json" \
          -d "{
            \"chat_id\": \"${{ secrets.TELEGRAM_CHAT_ID }}\",
            \"text\": \"$TELEGRAM_CONTENT\",
            \"parse_mode\": \"HTML\"
          }"
        
        echo "✅ Posted to Telegram"

    - name: Display Results
      run: |
        echo "🎯 UserOwned.ai Daily Posting Complete!"
        echo ""
        echo "⏰ Posted at: $(TZ='Europe/Berlin' date '+%H:%M CET')"
        echo "🐦 X Account: @userownedai"
        echo "📱 Telegram: Posted"
        echo "🚀 Next run: Tomorrow 10:00 CET"
        echo ""
        echo "Content posted:"
        echo "=============="
        echo "$X_CONTENT"
        echo "=============="
